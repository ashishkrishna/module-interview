{"name":"Modeling PV Modules","tagline":"Folsom Labs Exercise","body":"## The Exercise\r\n\r\nIn this exercise, you'll implement some of the core math used to model the potential output of a solar panel (called a solar _module_ in the industry).  This represents some of the core math that goes on deep in the process of simulating a solar photovoltaic array.  \r\n\r\nThis isn't the kind of thing we work on day-to-day (though is based on a problem we've already tackled), our intent with this exercise is not to look for pure algorithmic skill, or to filter for people who love doing math, but simply as an interesting and relevant context to see how you structure and test your code/algorithms.\r\n\r\n**Note:** You shouldn't need any special math knowledge – there's a support section below that should give you all the equations you need. Feel free to ask as many clarification questions about how this all fits together.\r\n\r\n### The tasks\r\n\r\nIn the [exercise repo](https://github.com/folsom-labs/module-interview), we've included a CSV (`data.csv`) of module files, as well as a test file (`tests.py`).  The goal is to write an implementation of a solar module that makes the tests past.\r\n\r\nOur tests are:\r\n\r\n1. Create a (python) module with functions that describe a (solar) module. Load the module coefficients for the Trina TSM PA05 from the CSV, set the temperature (T), to 25ºC and the irradiance (S) to 1000 W/m^2. \r\n\r\n   This test will pass when you calculate voltage and current matching the correct numerical values along the (solar) module's I/V curve.\r\n\r\n\r\n2. Make sure your implementation produces accurate results at alternative irradiance and temperature levels.\r\n\r\n   Here we used an irradiance of 600 W/m^2, and a temperature of 45ºC on the same Trina module as in Task 1.\r\n\r\n3. Usually, we don't just need to understand what the potential output of a solar module is (e.g. the I/V curve), we want to find out what voltage and current the module should be operating at in order to produce the most power.\r\n\r\n   Write a function/method that determines the voltage and current along a modules I/V curve that maximizes power.  We won't tell you what the answer is, so also write the test that proves you found it.\r\n\r\n4. Write the tests to make sure your algorithm in Task 3 works for a range of module operating conditions and handles trick edge cases correctly.\r\n\r\n   For your reference, a module in the middle of the the Arizona desert at noon might have irradiance of ~1400 W/m^2.  A wintry London day might be 600 W/m^2.\r\n\r\n\r\n## Background\r\n\r\nSolar modules are generally built using silicon semiconductors (often made at old chip fabs), the same properties that enable chip designers build logic gates, enable sunlight (photons) to knock electrons around, creating electrical current. You don't need to know any of that, though. For this exercise, we just need to know that the equation that defines the output of a particular solar module is:\r\n\r\n\\begin{equation}\r\n    I=I_{sc}\\cdot S / 1000 - I_0(T)\\left(e^{\\frac{q}{kT\\gamma}\\left(V+I \\cdot R_s\\right)}-1\\right)-\\frac{V+I \\cdot R_s}{R_p}\r\n\\end{equation}\r\n\r\nWhere, _I<sub>0</sub>(T)_ is a function that adjusts the output of a solar module for the temperature it's operating at. All other things equal, at higher temperatures a module will output at about the same current, but a lower voltage (which is actually caused by the fact that electrons are more free to move around the semiconductor at higher temperatures).  This function is given by:\r\n\r\n\\begin{equation}\r\n    I_0(T)=I_0\\left(1+\\tau\\right)^{T-298}\r\n\\end{equation}\r\n\r\nFor a given solar module, almost all of the coefficients are pre-determined.  The **Module Parameters** are determined from [published specifications](http://www.suniva.com/documents/OPTXXX-60-4-1B0%202013%2002%2007.pdf) to define a the baseline behavior for a specific module.  With the parameters in place, you can plug in the  that ultimately you can plug in the **Environmental Inputs**, for sunlight, _S_ (technically this is called irradiance), and temperature, _T_.  Finally, you have an equation where the only remaining variables are voltage, _V_, and current, _I_,  this equation defines the output curve of a solar panel.\r\n\r\n<table class=\"parameter-table table-striped\">\r\n    <tr>\r\n        <th>\r\n            Module Output\r\n        </th>\r\n        <td>\r\n            <dl class='dl-horizontal skinny'>\r\n                <dt>\\(I\\)</dt><dd>Current supplied by the module</dd>\r\n                <dt>\\(V\\)</dt><dd>Voltage supplied by the module</dd>\r\n            </dl>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th>\r\n            Environmental Inputs\r\n        </th>\r\n        <td>\r\n            <dl class='dl-horizontal skinny'>\r\n                <dt>\\(S\\)</dt><dd>Effective Irradiance (W/M<sup>2)</sup></dd>\r\n                <dt>\\(T_{C}\\)</dt><dd>Module (Cell) Temperature, (K)</dd>\r\n            </dl>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th>\r\n            Module Parameters\r\n        </th>\r\n        <td>\r\n            <dl class='dl-horizontal skinny'>\r\n                <dt>\\(I_{sc}\\)</dt><dd>The short-circuit current, the maximum current a module can output (Amps)</dd>\r\n                <dt>\\(I_{0}\\)</dt><dd> inverse saturation current, how much is current reduced as voltage increases (Amps)</dd>\r\n                <dt>\\(R_{p}(G)\\)</dt><dd> Parallel resistance in connections within the module (Ohms, \\(\\Omega)\\)</dd>\r\n                <dt>\\(R_{s}\\)</dt><dd>Series Resistance in connections within the module (Ohms, \\(\\Omega)\\)</dd>\r\n                <dt>\\(\\gamma\\)</dt><dd> Module ideality factor, typically 1-2, how round is the curve (dimensionless)</dd>\r\n            </dl>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <th>\r\n            Physical Constants\r\n        </th>\r\n        <td>\r\n            <dl class='dl-horizontal skinny'>\r\n                <dt>\\(q\\)</dt><dd>Fundamental charge of the electron, 1.602 &middot; 10<sup>-19</sup> (Coulomb)</dd>\r\n                <dt>\\(K\\)</dt><dd>Boltzmann constant, 1.381 &middot; 10<sup>-23</sup> (J/K)</dd>\r\n            </dl>\r\n        </td>\r\n    </tr>\r\n</table>\r\n\r\n\r\n\r\n#### Putting it all together\r\n\r\nWhen you plug in the formulation for a given solar module, you get a curve that looks like the image below. Basically, current output decreases as voltage output increases.\r\n\r\nThere are a few interesting points on the curve: _I<sub>sc</sub>_ is the short-circuit current, the maximum current a module can output (when there is no voltage); _V<sub>oc</sub>_ is the open-circuit voltage, the maximum voltage a module can output (when there is no current output); _V<sub>mp</sub>_ and _I<sub>mp</sub>_ define the maximum power of the module, the point on the output curve that maximizes the actual power output.  You may recall that power, _P_, is just voltage time current: \\( P = V \\cdot I \\).\r\n\r\n\r\n![module IV Curve](http://www.folsomlabs.com/modeling/modeling/moduleIV.jpg)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}